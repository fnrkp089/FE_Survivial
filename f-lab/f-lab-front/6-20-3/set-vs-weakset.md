# π“ Set vs WeakSet

## Set

`Set` κ°μ²΄λ” μλ°”μ¤ν¬λ¦½νΈμ—μ„ κ³ μ ν• κ°’λ“¤μ λ¨μ(collection)μ„ κ΄€λ¦¬ν•λ” λ° μ‚¬μ©λ©λ‹λ‹¤. μ΄λ” λ°°μ—΄κ³Ό λΉ„μ·ν•μ§€λ§ λ‡ κ°€μ§€ μ£Όμ” μ°¨μ΄μ μ΄ μμµλ‹λ‹¤:

* `Set`μ— μ €μ¥λ κ° κ°’μ€ κ³ μ ν•©λ‹λ‹¤. μ¦‰, λ™μΌν• κ°’μ„ λ‘ λ² μ΄μƒ μ¶”κ°€ν•λ”λΌλ„ `Set`μ—μ„λ” ν•λ‚μ ν•­λ©λ§ μ μ§€λ©λ‹λ‹¤.
* `Set`μ κ°’μ€ μμ„κ°€ μ—†μµλ‹λ‹¤. `Set`μ€ μΈλ±μ¤λ΅ κ°’μ„ μ ‘κ·Όν•λ” κ²ƒμ„ μ§€μ›ν•μ§€ μ•μµλ‹λ‹¤.
* `Set`μ€ `add`, `has`, `delete`, `clear`μ™€ κ°™μ€ μ μ©ν• λ©”μ„λ“λ¥Ό μ κ³µν•μ—¬ κ°’μ„ μ¶”κ°€ν•κ³ , μ΅°νν•κ³ , μ‚­μ ν•λ” λ“±μ μ‘μ—…μ„ μν–‰ν•  μ μμµλ‹λ‹¤.

ex)

```javascript
let set = new Set();

set.add(1); // Set [ 1 ]
set.add(2); // Set [ 1, 2 ]
set.add(3); // Set [ 1, 2, 3 ]
set.add(2); // Set [ 1, 2, 3 ], 2λ” μ΄λ―Έ Setμ— μμΌλ―€λ΅ μ¶”κ°€λμ§€ μ•μµλ‹λ‹¤.

console.log(set.has(1)); // true
console.log(set.size); // 3

set.delete(1); // Set [ 2, 3 ]
set.clear(); // Set []
```

`Set`μ€ μ΄ν„°λ¬λΈ”ν•λ―€λ΅, `for...of` λ£¨ν”„λ¥Ό μ‚¬μ©ν•μ—¬ λ¨λ“  κ°’μ„ μνν•  μ μμµλ‹λ‹¤:

```javascript
let set = new Set([1, 2, 3, 4, 5]);

for (let value of set) {
    console.log(value); // 1, 2, 3, 4, 5λ¥Ό μμ„λ€λ΅ μ¶λ ¥ν•©λ‹λ‹¤.
}
```

`Set`μ€ λ°°μ—΄κ³Ό μ μ‚¬ν•μ§€λ§ μ¤‘λ³µλ κ°’μ„ ν—μ©ν•μ§€ μ•λ”λ‹¤λ” μ μ—μ„ μ°¨μ΄κ°€ μμΌλ―€λ΅, μ¤‘λ³µ μ—†λ” κ°’λ“¤μ λ¦¬μ¤νΈλ¥Ό κ΄€λ¦¬ν•λ” λ° μ μ©ν•©λ‹λ‹¤.

ex)

1.  μ¤‘λ³µ μ κ±°: `Set`μ€ μ¤‘λ³µλ κ°’μ„ ν—μ©ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ¤‘λ³µλ κ°’μ„ κ°€μ§€λ” λ°μ΄ν„°μ—μ„ κ³ μ ν• κ°’λ“¤λ§μ„ μ¶”μ¶ν•κ³ μ ν•  λ• μ‚¬μ©λ©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄, λ°°μ—΄μ—μ„ μ¤‘λ³µλ μ”μ†λ¥Ό μ κ±°ν•κ³  μ μΌν• κ°’λ“¤μ„ μ¶”μ¶ν•  μ μμµλ‹λ‹¤.

    ```javascript
    const arr = [1, 2, 3, 4, 2, 3, 1, 5];
    const uniqueValues = [...new Set(arr)];
    console.log(uniqueValues); // [1, 2, 3, 4, 5]
    ```
2.  κ²€μ‚¬: `Set`μ€ κ°’μ μ΅΄μ¬ μ—¬λ¶€λ¥Ό λΉ λ¥΄κ² ν™•μΈν•  μ μμµλ‹λ‹¤. νΉμ • κ°’μ΄ `Set`μ— ν¬ν•¨λμ–΄ μλ”μ§€ ν™•μΈν•κ³ μ ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.

    ```javascript
    const set = new Set([1, 2, 3]);

    console.log(set.has(2)); // true
    console.log(set.has(4)); // false
    ```
3.  ν•„ν„°λ§: `Set`μ„ μ‚¬μ©ν•μ—¬ κ³ μ ν• κ°’λ“¤λ΅ κµ¬μ„±λ λ°μ΄ν„°λ¥Ό ν•„ν„°λ§ν•κ±°λ‚ μ ν¨μ„± κ²€μ‚¬λ¥Ό μν–‰ν•  μ μμµλ‹λ‹¤.

    ```javascript
    const numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10];

    const evenNumbers = numbers.filter(num => num % 2 === 0);
    console.log(evenNumbers); // [2, 4, 6, 8, 10]

    const uniqueNumbers = [...new Set(numbers)];
    console.log(uniqueNumbers); // [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
    ```
4.  &#x20;μ§‘κ³„: `Set`μ€ κ³ μ ν• κ°’λ“¤μ μ§‘ν•©μ„ κ΄€λ¦¬ν•κΈ° λ•λ¬Έμ— λ°μ΄ν„°μ—μ„ κ³ μ ν• κ°’λ“¤μ κ°μλ¥Ό κ³„μ‚°ν•κ±°λ‚ μ§‘κ³„ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.

    ```javascript
    const fruits = ['apple', 'banana', 'apple', 'orange', 'banana', 'mango'];

    const uniqueFruits = new Set(fruits);
    console.log(uniqueFruits.size); // 4

    // κ³ μ ν• κ³ΌμΌλ“¤μ„ λ°°μ—΄λ΅ λ³€ν™
    const uniqueFruitsArray = Array.from(uniqueFruits);
    console.log(uniqueFruitsArray); // ['apple', 'banana', 'orange', 'mango']
    ```

`Set`μ€ μ¤‘λ³µλμ§€ μ•λ” κ°’λ“¤μ„ κ΄€λ¦¬ν•κΈ° μ„ν•΄ μ‚¬μ©λλ©°, μ„μ™€ κ°™μ€ μƒν™©μ—μ„ μ μ©ν•κ² ν™μ©λ  μ μμµλ‹λ‹¤. λ°μ΄ν„°μ—μ„ κ³ μ ν• κ°’λ“¤μ„ μ¶”μ¶ν•κ³  μ¤‘λ³µμ„ μ κ±°ν•κ±°λ‚ λ©¤λ²„μ‹­ κ²€μ‚¬λ¥Ό μν–‰ν•λ ¤λ” κ²½μ° `Set`μ„ ν™μ©ν•  μ μμµλ‹λ‹¤.

## WeakSet

`WeakSet`μ€ `Set`κ³Ό μ μ‚¬ν•μ§€λ§ μ•½ν• μ°Έμ΅°(weak reference)λ¥Ό κ°€μ§€λ” κ°μ²΄λ§μ„ μ”μ†λ΅ μ €μ¥ν•  μ μλ” νΉλ³„ν• μΆ…λ¥μ `Set`μ…λ‹λ‹¤.

`WeakSet`μ νΉμ§•μ€ λ‹¤μκ³Ό κ°™μµλ‹λ‹¤:

1. `WeakSet`μ€ κ°μ²΄λ§μ„ μ”μ†λ΅ κ°€μ§ μ μμµλ‹λ‹¤. μ›μ‹ κ°’(primitive values)μ€ `WeakSet`μ— μ €μ¥ν•  μ μ—†μµλ‹λ‹¤.
2. `WeakSet`μ κ°μ²΄λ“¤μ— λ€ν• μ°Έμ΅°λ” μ•½ν•κ² μ μ§€λ©λ‹λ‹¤. μ΄λ” `WeakSet`μ μ”μ†κ°€ κ°€λΉ„μ§€ μ»¬λ ‰μ…μ λ€μƒμ΄ λ  μ μλ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤. `WeakSet`μ— μλ” κ°μ²΄μ— λ€ν• λ‹¤λ¥Έ μ°Έμ΅°κ°€ μ—†λ‹¤λ©΄, κ·Έ κ°μ²΄λ” μ–Έμ λ“ μ§€ λ©”λ¨λ¦¬μ—μ„ μ κ±°λ  μ μμµλ‹λ‹¤.
3. `WeakSet`μ€ μ΄ν„°λ¬λΈ”μ΄ μ•„λ‹™λ‹λ‹¤. μ΄λ” `WeakSet`μ λ‚΄μ©μ„ μ§μ ‘μ μΌλ΅ μνν•κ±°λ‚, λ¨λ“  μ”μ†μ— μ ‘κ·Όν•  μ μ—†λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.
4. `WeakSet`μ€ `.size` μ†μ„±μ΄ μ—†μµλ‹λ‹¤. `WeakSet`μ— μ–Όλ§λ‚ λ§μ€ μ”μ†κ°€ μλ”μ§€λ¥Ό ν™•μΈν•  μ μλ” λ°©λ²•μ€ μ—†μµλ‹λ‹¤.

`WeakSet`μ€ `add`, `has`, `delete`λΌλ” μ„Έ κ°€μ§€ λ©”μ„λ“λ§μ„ μ κ³µν•©λ‹λ‹¤. μλ¥Ό λ“¤μ–΄:

```javascript
let weakSet = new WeakSet();
let obj = {};

weakSet.add(obj);
console.log(weakSet.has(obj)); // true

weakSet.delete(obj);
console.log(weakSet.has(obj)); // false
```

`WeakSet`μ€ κ°€λΉ„μ§€ μ»¬λ ‰μ…μ„ ν†µν•΄ λ©”λ¨λ¦¬λ¥Ό λ„μν•μ§€ μ•λ„λ΅ λ„μ™€μ£Όλ” λ° μ μ©ν•λ©°, μ£Όμ–΄μ§„ κ°μ²΄κ°€ μ–΄λ””μ— μ‚¬μ©λμ—λ”μ§€λ¥Ό ν‘μ‹ν•λ” λ° μ‚¬μ©λ  μ μμµλ‹λ‹¤. κ°€μ¥ μΌλ°μ μΈ μ‚¬μ© μ‚¬λ΅€λ” μ£Όμ–΄μ§„ κ°μ²΄κ°€ νΉμ • `WeakSet`μ— μλ”μ§€ μ•„λ‹μ§€λ¥Ό ν™•μΈν•λ” κ²ƒμ…λ‹λ‹¤.

ex)

```javascript
let weakSet = new WeakSet();

let obj1 = { name: 'Object 1' };
let obj2 = { name: 'Object 2' };

// κ°μ²΄λ¥Ό WeakSetμ— μ¶”κ°€ν•©λ‹λ‹¤.
weakSet.add(obj1);
weakSet.add(obj2);

console.log(weakSet.has(obj1)); // true
console.log(weakSet.has(obj2)); // true

// κ°μ²΄λ¥Ό μ κ±°ν•©λ‹λ‹¤.
weakSet.delete(obj1);

console.log(weakSet.has(obj1)); // false
console.log(weakSet.has(obj2)); // true

// λ‹¤μ μ½”λ“λ” μ—λ¬λ¥Ό λ°μƒμ‹ν‚µλ‹λ‹¤. WeakSetμ€ μ¤μ§ κ°μ²΄λ§μ„ μ”μ†λ΅ κ°€μ§ μ μμµλ‹λ‹¤.
// weakSet.add(1); // TypeError: Invalid value used in weak set
```

μ΄ μμ‹μ—μ„ `weakSet`μ€ `obj1`κ³Ό `obj2`μ— λ€ν• μ°Έμ΅°λ¥Ό μ μ§€ν•μ§€λ§, μ΄ μ°Έμ΅°λ” μ•½ν•κ² μ μ§€λ©λ‹λ‹¤. μ΄ λ§μ€, `obj1` λλ” `obj2`μ— λ€ν• λ‹¤λ¥Έ μ°Έμ΅°κ°€ μ—†λ‹¤λ©΄, μ΄ κ°μ²΄λ“¤μ€ μ–Έμ λ“ μ§€ λ©”λ¨λ¦¬μ—μ„ μ κ±°λ  μ μλ‹¤λ” κ²ƒμ…λ‹λ‹¤. μ΄λ° νΉμ§•μ€ `WeakSet`μ΄ μ£Όλ΅ κ°μ²΄μ μ΅΄μ¬ μ—¬λ¶€λ¥Ό ν™•μΈν•λ” μ©λ„λ΅ μ‚¬μ©λλ” μ΄μ μ…λ‹λ‹¤.



## Set vs WeakSet

`Set`κ³Ό `WeakSet`μ€ μλ°”μ¤ν¬λ¦½νΈμ—μ„ μ κ³µν•λ” λ‘ κ°€μ§€ μ„λ΅ λ‹¤λ¥Έ λ°μ΄ν„° κµ¬μ΅°μ…λ‹λ‹¤. \
ν•μ§€λ§ λ‡κ°€μ§€ μ°¨μ΄μ΄ μ΅΄μ¬ν•©λ‹λ‹¤.

1. **μ €μ¥ κ°€λ¥ν• κ°’**: `Set`μ€ λ¨λ“  μΆ…λ¥μ κ°’μ„ μ €μ¥ν•  μ μμµλ‹λ‹¤: μ›μ‹ κ°’ (Numbers, Strings, Booleans λ“±λ“±)κ³Ό κ°μ²΄λ“¤μ„ λ¨λ‘ ν¬ν•¨ν•©λ‹λ‹¤. λ°λ©΄μ— `WeakSet`μ€ μ¤μ§ κ°μ²΄λ§μ„ μ €μ¥ν•  μ μμµλ‹λ‹¤.
2. **μ°Έμ΅°μ λ°©μ‹**: `Set`μ—μ„λ” μ €μ¥λ κ°’λ“¤μ„ κ°•ν• μ°Έμ΅°λ΅ κ°€μ Έκ°‘λ‹λ‹¤.\
   μ¦‰ `Set`μ΄ κ°’μ„ μ μ§€ν•κ³  μλ” λ™μ• κ°€λΉ„μ§€ μ»¬λ ‰μ…(Garbage Collection)μΌλ΅λ¶€ν„° κ·Έ κ°’μ„ λ³΄νΈν•λ‹¤λ” κ²ƒμ„ μλ―Έν•©λ‹λ‹¤.\
   `WeakSet`μ€ μ €μ¥λ κ°μ²΄μ— λ€ν•΄ μ•½ν• μ°Έμ΅°λ¥Ό κ°€μ§‘λ‹λ‹¤. μ΄λ” `WeakSet`μ— μ €μ¥λ κ°μ²΄κ°€ λ‹¤λ¥Έ κ³³μ—μ„ μ‚¬μ©λμ§€ μ•κ² λλ©΄ κ°€λΉ„μ§€ μ»¬λ ‰μ…μ λ€μƒμ΄ λ  μ μμμ„ μλ―Έν•©λ‹λ‹¤.
3. **μν κ°€λ¥μ„±**: `Set`μ€ μ΄ν„°λ¬λΈ”ν•©λ‹λ‹¤. \
   μ¦‰, `for...of` λ£¨ν”„λ‚ `Set.prototype.forEach` λ©”μ„λ“λ¥Ό μ‚¬μ©ν•μ—¬ `Set`μ λ¨λ“  κ°’μ„ μνν•  μ μμµλ‹λ‹¤. \
   `WeakSet`μ€ μ΄ν„°λ¬λΈ”μ΄ μ•„λ‹™λ‹λ‹¤. `WeakSet`μ κ°’μ„ μ§μ ‘μ μΌλ΅ μ ‘κ·Όν•κ±°λ‚ μνν•  μ μλ” λ°©λ²•μ€ μ—†μµλ‹λ‹¤.
4. **λ©”μ„λ“μ™€ μ†μ„±**: `Set`μ€ μ—¬λ¬ κ°€μ§€ λ©”μ„λ“ (`add`, `delete`, `clear`, `has`)μ™€ μ†μ„± (`size`)μ„ μ κ³µν•©λ‹λ‹¤. \
   `WeakSet`μ€ `add`, `delete`, `has` λ©”μ„λ“λ§ μ κ³µν•λ©°, `size` μ†μ„±μ΄λ‚ `clear` λ©”μ„λ“λ” μ κ³µν•μ§€ μ•μµλ‹λ‹¤.

`Set`μ€ μ¤‘λ³µμ„ ν—μ©ν•μ§€ μ•λ” κ°’μ„ μ €μ¥ν•  λ• μ‚¬μ©λλ©°, \
`WeakSet`μ€ κ°μ²΄μ μ΅΄μ¬ μ—¬λ¶€λ¥Ό ν™•μΈν•κ³  κ°€λΉ„μ§€ μ»¬λ ‰μ…μΌλ΅λ¶€ν„° λ³΄νΈν•μ§€ μ•λ” κ²½μ°μ— μ‚¬μ©λ©λ‹λ‹¤.

